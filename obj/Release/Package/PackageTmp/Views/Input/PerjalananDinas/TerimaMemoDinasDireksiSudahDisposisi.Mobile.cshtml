@model Ptpn8.Models.MemoOnline.ViewTerima_MemoDinas

<script src="@Url.Content("~/ReportViewer/js/telerikReportViewer-10.2.16.725.js")"></script>


<!--Reference the SignalR library. -->
<script src="@Url.Content("~/Scripts/jquery.signalR-2.2.1.min.js")"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="@Url.Content("~/signalr/hubs")"></script>

@*<script src="~/Scripts/PerjalananDinas/TerimaMemoDinasDireksiSudahDisposisi.js"></script>*@
@*<img id="progress" src="~/Content/Images/ajax-loader.gif" style="position: absolute; left: 50%; top: 50%; " />*@
@(
                            // All deferred initialization statements will be rendered here
                            Html.TelerikReporting().DeferredScripts()
)

<button type="button" id="btnSelesaiSimpanDetail" class="k-button" style="color: white; background-color: blue; font-size: small; height: 30px; text-align:left; display: none;"><span class="k-font-icon .k-i-search"></span>Cek Kilometer</button>

@Html.Kendo().TextBox().Name("namaUser").Value(HttpContext.Current.User.Identity.Name).HtmlAttributes(new { style = "display: none;" })
@(Html.Kendo().TextBox().Name("UnitId").Value(Ptpn8.Models.CRUDApplicationUser.CRUD.Get1Record(HttpContext.Current.User.Identity.Name).PosisiLokasiKerjaId.ToString()).HtmlAttributes(new { style = "width: 100%; display: none" }))

<table width="100%" class="hdr">
    <tr>
        <td>
            <div style="text-align:center">@ViewBag.Title</div>
        </td>
    </tr>
</table>
<div class="_headerteh">
    <table width="50%;" align="center">
        <tr>
            <td width="100%;">
                <label id="msgInputView" style="text-align:center; color: white; background-color: red; font-size: medium;"></label>
            </td>
        </tr>
    </table>

    <table width="100%;">
        <tr>
            <td width="10%">
                <label style="text-align:left">Tahun:</label>
            </td>
            <td style="font-size:small">
                @(Html.Kendo().NumericTextBox().Name("TahunBuku").Min(2016).Format("D4")
                            .HtmlAttributes(new { style = "width:25%", @class = "allcaps" })
                            .Value(DateTime.Now.Year)
                )
            </td>
        </tr>
        <tr>
            <td>
                <label style="text-align:left">Bulan:</label>
            </td>
            <td>
                @(Html.Kendo().DropDownList().Name("ddlBulan").DataTextField("Text").DataValueField("Value")
                            //.Events(ev => ev.Select("ddlBulanOnSelect"))
                            .SelectedIndex(DateTime.Now.Month - 1)
                            .HtmlAttributes(new { style = "font-size: medium;" })
                            .BindTo(new List<SelectListItem>()
                            {
                                                        new SelectListItem() {
                                                            Text = "Januari",
                                                            Value = "1"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "Februari",
                                                            Value = "2"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "Maret",
                                                            Value = "3"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "April",
                                                            Value = "4"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "Mei",
                                                            Value = "5"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "Juni",
                                                            Value = "6"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "Juli",
                                                            Value = "7"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "Agustus",
                                                            Value = "8"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "September",
                                                            Value = "9"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "Oktober",
                                                            Value = "10"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "November",
                                                            Value = "11"
                                                        },
                                                        new SelectListItem() {
                                                            Text = "Desember",
                                                            Value = "12"
                                                        }
                            })
                )
            </td>
        </tr>
        <tr>
            <td></td>
            <td width="100%" align="left">
                <div class="confirm">
                    <button type="button" id="btnProses" onclick="btnProsesOnClick()" class="k-button" style="color: white; background-color: gray; font-size: small; height: 30px;"><span class="k-font-icon k-i-print"></span>View</button>
                </div>
            </td>
        </tr>
    </table>
</div>

@*detail*@
<div id="_detail" class="_detail">
    @(Html.Kendo()
                    .Grid<Ptpn8.Models.MemoOnline.ViewTerima_MemoDinas>(Guid.Empty.ToString())
                    .Name("grdDetail")
                    .Columns(g =>
                    {
                        g.Bound(i => i.Terima_MemoDinasId).Hidden();
                        g.Bound(i => i.Kirim_MemoDinasId).Hidden();
                        g.Bound(i => i.UnitId).Hidden();
                        g.Bound(i => i.NamaUnit).Hidden();
                        g.Bound(i => i.TahunAgenda_SuratMasuk).Hidden();
                        g.Bound(i => i.NomorAgenda_SuratMasuk).Hidden();
                        g.Bound(i => i.StatusDistribusi).Hidden();

                        g.Bound(i => i.TanggalDisposisi_MemoDinas).Hidden();
                        g.Bound(i => i.PembuatDisposisi_MemoDinas).Hidden();
                        g.Bound(i => i.TujuanDisposisi_MemoDinas).Hidden();
                        g.Bound(i => i.TujuanIdDisposisi_MemoDinas).Hidden();
                        g.Bound(i => i.NamaTujuan_MemoDinas).Hidden();
                        g.Bound(i => i.IsiDisposisi_MemoDinas).Hidden();
                        g.Bound(i => i.PenjelasanDisposisi_MemoDinas).Hidden();
                        g.Bound(i => i.Penerima_MemoDinas).Hidden();
                        g.Bound(i => i.NamaPengirim).Title("Dari").HtmlAttributes(new { style = "text-transform: uppercase;", @readonly = "true" });
                        g.Bound(i => i.Nomor_MemoDinasView).Width(100).Title("No").HtmlAttributes(new { style = "text-transform: uppercase;", @readonly = "true" }).Hidden();
                        g.Bound(i => i.Tanggal_MemoDinas).Width(60).Title("Tanggal").HtmlAttributes(new { style = "text-transform: uppercase;", @readonly = "true" }).Hidden();
                        g.Bound(i => i.Perihal_MemoDinas).Title("Perihal").HtmlAttributes(new { style = "text-transform: uppercase;" }).HtmlAttributes(new { style = "text-transform: uppercase;", @readonly = "true" });
                        //g.Bound(i => i.SifatSurat_MemoDinas).Width(100).Title("Sifat Surat").HtmlAttributes(new { style = "text-transform: uppercase;", @readonly = "true" });
                        //g.Bound(i => i.NomorTerima_MemoDinas).Width(60).Title("No Terima").HtmlAttributes(new { style = "text-transform: uppercase;", @readonly = "true" });
                        //g.Bound(i => i.TanggalTerima_MemoDinas).Width(60).Title("Tanggal Terima").ClientTemplate("#= kendo.toString(TanggalTerima_MemoDinas,'dd/MM/yyyy')#").HtmlAttributes(new { style = "text-transform: uppercase;", @readonly = "true" });
                        g.Command(command =>
                        {
                            command.Custom("IsiMemo").Text("View Isi & Disposisi").Click("openWindowIsiMemo")
                                .HtmlAttributes(new { @class = "k-button k-font-icon k-i-justify-clear", style = "font-size: small; font-weight: 500;" });
                            //command.Custom("DisposisiMemo").Text("Disposisi").Click("openWindowDisposisiMemo")
                            //    .HtmlAttributes(new { @class = "k-button k-font-icon k-i-pencil", style = "font-size: small; font-weight: 500;" });
                            //command.Custom("DistribusiMemo").Text("Distribusi").Click("openWindowDistribusiMemo")
                            //    .HtmlAttributes(new { @class = "k-button k-font-icon k-i-redo-large", style = "font-size: small; font-weight: 500;" });
                        });
                    })
                    .AutoBind(false)
                    .Navigatable()
                    .Resizable(resizeable => resizeable.Columns(true))
                    .Scrollable()
                    .Excel(excel => excel.AllPages(true))
                    .Sortable()
                    .Groupable()
                    .Filterable().HtmlAttributes(new { style = "Height: 600px" })
                    .Events(e =>
                    {
                        //e.Change("grdOnChange");
                        //e.Edit("grdOnEdit");
                        e.DataBound("grdOnDataBound");
                    })
                    .DataSource(o => o
                        .Ajax()
                        .ServerOperation(false)
                        .Batch(true)
                        .Model(model =>
                        {
                            model.Id(p => p.Terima_MemoDinasId);
                            model.Field(f => f.NamaPengirim).Editable(false);
                            model.Field(f => f.Nomor_MemoDinasView).Editable(false);
                            model.Field(f => f.Tanggal_MemoDinas).Editable(false);
                            model.Field(f => f.Perihal_MemoDinas).Editable(false);
                        })
                        .Read(read => read.Action("detailRead", "Input").Data("filterdetailRead").Type(HttpVerbs.Post))
                        .Sort(sort => sort.Add(f => f.Tanggal_MemoDinas).Descending())
                        )
    )
</div>

<div id="errWindow">
    <table width="100%">
        <tr>
            <td width="1%"></td>
            <td>
                <span style="font-size: medium; font-weight: 500;">Data Hasil Input Tidak Valid</span>
                <span style="font-size: medium; font-weight: 500;"><label id="errMsg"></label></span>
            </td>
            <td width="1%"></td>
        </tr>
        <tr>
            <td></td>
            <td><button id="ok" class="delete k-button">Perbaiki</button></td>
            <td></td>
        </tr>
    </table>
</div>

<div id="wDisposisiMemo" title="Disposisi Memo" style="font-size: smaller;">

</div>


<div id="wDistribusiMemo" title="Distribusi Memo">
    <table width="100%">
        <tr>
            <td>
                <label id="statusDistribusi"></label>
            </td>
        </tr>
        <tr>
            <td align="center">
                @Html.Kendo().Button().Name("btnDistribusi").Events(ev => ev.Click("btnDistribusiOnClick")).Content("Distribusi")
                @Html.Kendo().Button().Name("btnBatalDistribusi").Events(ev => ev.Click("btnBatalDistribusiOnClick")).Content("Batal")
            </td>
        </tr>
    </table>
</div>

<div id="wIsiMemo" title="Isi Memo" style="display: block;">
    <table width="100%">
        <tr>
            <td>
                <p>
                    <label style="font-size:x-large; font-weight:600; text-align:center;">MEMO</label>
                </p>
                <p>
                    <table>
                        <tr>
                            <td width="20%">Nomor:</td>
                            <td>
                                <label id="_NoMemo"></label>
                            </td>
                        </tr>
                        <tr>
                            <td>Kepada:</td>
                            <td><label id="_Kepada"></label></td>
                        </tr>
                        <tr>
                            <td>Dari:</td>
                            <td><label id="_Dari"></label></td>
                        </tr>
                        <tr>
                            <td>Perihal:</td>
                            <td><label id="_Perihal"></label></td>
                        </tr>
                        <tr>
                            <td>Tanggal:</td>
                            <td><label id="_Tanggal"></label></td>
                        </tr>
                    </table>
                    <div id="yaMemoDistribusi" style="display:none;">
                        <table>
                            <tr>
                                <td width="4%"></td>
                                <td width="15%"></td>
                                <td><label>DISTRIBUSI SURAT MASUK</label><label id="_TahunAgenda_SuratMasuk" style="display: none;"></label></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td><label id="_NomorAgenda_SuratMasuk" style="display: none;"></label></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>No Surat:</td>
                                <td><label id="_Nomor_SuratMasuk"></label></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Tanggal Surat:</td>
                                <td><label id="_Tanggal_SuratMasuk"></label></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Pengirim:</td>
                                <td><label id="_Pengirim_SuratMasuk"></label></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Perihal:</td>
                                <td><label id="_Perihal_SuratMasuk"></label></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td>
                                    @(
                                                Html.Kendo().PanelBar().Name("panelSuratMasuk")
                                                .HtmlAttributes(new { style = "width:490px;" })
                                                    .Items(pnl =>
                                                    {
                                                        pnl.Add().Text("Isi Surat (Hasil Scan)").Content(
                            @<div>
                                <img id="img1" class="imgSuratMasuk" />
                                <img id="img2" class="imgSuratMasuk" />
                                <img id="img3" class="imgSuratMasuk" />
                                <img id="img4" class="imgSuratMasuk" />
                                <img id="img5" class="imgSuratMasuk" />
                            </div>
);
                                pnl.Add().Text("Disposisi Direksi (Hasil Scann)").Content(@<img id="imgdisposisi" class="imgSuratMasuk" />);
        pnl.Add().Text("Disposisi Direksi").Content(
                @<div id="wDisposisiSuratDinas" title="Disposisi Surat Dinas" style="font-size: smaller;">
                     <table width="100%">
                         <tr>
                             <td width="15%">
                                 <label>Sifat Surat:</label>
                             </td>
                             <td>
                                 @(Html.Kendo().DropDownList().Name("__SifatSurat")
.DataTextField("Text")
.DataValueField("Value")
.HtmlAttributes(new { @readonly = "true" })
.BindTo(new List<SelectListItem>()
{
new SelectListItem() {
Text = "BIASA",
Value = "BIASA"
},
new SelectListItem() {
Text = "SEGERA",
Value = "SEGERA"
},
new SelectListItem() {
Text = "PENTING",
Value = "PENTING"
},
new SelectListItem() {
Text = "RAHASIA",
Value = "RAHASIA"
}
})
                                 )
                             </td>
                         </tr>
                         <tr>
                             <td><label>Ditujukan Kepada:</label></td>
                             <td>
                                 <table width="100%" style="border:solid; border-width: thin; text-align: center;">
                                     <tr>
                                         <td style="border: solid; border-width: thin;" width="25%">
                                             <input type="checkbox" id="_fieldlistDitujukanA" value="C6DFDB6D-056E-45CC-9D07-A2207FF5FCC3">
                                             <label>DIREKTUR</label>
                                             <table width="100%" style="text-align: center;">
                                                 <tr>
                                                     <td style="border-top: solid; border-width: thin;">
                                                         <label id="_lbl1Ditujukan1">I.1</label>
                                                         <input type="checkbox" id="_fieldlistDitujukan1" value="203BB8F7-5983-4C65-936F-9C3D83486428">
                                                         <label id="_lbl2Ditujukan1">CS</label>
                                                     </td>
                                                     <td style="border-top: solid; border-left: solid; border-right:solid; border-width: thin;">
                                                         <label id="_lbl1Ditujukan2">I.2</label>
                                                         <input type="checkbox" id="_fieldlistDitujukan2" value="203BB8F7-5983-4C65-936F-9C3D83486429">
                                                         <label id="_lbl2Ditujukan2">SPI</label>
                                                     </td>
                                                 </tr>
                                             </table>
                                         </td>
                                         <td style="border: solid; border-width: thin;" width="25%">
                                             <input type="checkbox" id="_fieldlistDitujukanC" value="78DD72E8-18BA-4A78-85FE-578923128A95">
                                             <label>OPS. I</label>
                                             <table width="100%" style="text-align: center;">
                                                 <tr>
                                                     <td style="border-top: solid; border-width: thin;">
                                                         <label id="_lbl1Ditujukan4">II.1</label>
                                                         <input type="checkbox" id="_fieldlistDitujukan4" value="203BB8F7-5983-4C65-936F-9C3D83486430">
                                                         <label id="_lbl2Ditujukan4">OPS TEH & ANTAN</label>
                                                     </td>
                                                 </tr>
                                             </table>
                                         </td>
                                         <td style="border: solid; border-width: thin;" width="25%">
                                             <input type="checkbox" id="_fieldlistDitujukanB" value="bdd778fe-be35-42d7-a891-4b2be7126cc7">
                                             <label>OPS. II</label>
                                             <table width="100%" style="text-align: center;">
                                                 <tr>
                                                     <td style="border-top: solid; border-width: thin;">
                                                         <label id="_lbl1Ditujukan5">II.1</label>
                                                         <input type="checkbox" id="_fieldlistDitujukan5" value="203BB8F7-5983-4C65-936F-9C3D83486431">
                                                         <label id="_lbl2Ditujukan5">OPS SAWIT & KARET</label>
                                                     </td>
                                                 </tr>
                                             </table>
                                         </td>
                                         <td style="border: solid; border-width: thin;" width="25%">
                                             <input type="checkbox" id="_fieldlistDitujukanD" value="24BDBB95-0CD5-463E-9ABC-A4B03AB70A1A">
                                             <label>BUSINESS SUPPORT</label>
                                             <table width="100%" style="text-align: center;">
                                                 <tr>
                                                     <td style="border-top: solid; border-left: solid; border-right:solid; border-width: thin;">
                                                         <label id="_lbl1Ditujukan10">III.I</label>
                                                         <input type="checkbox" id="_fieldlistDitujukan10" value="203BB8F7-5983-4C65-936F-9C3D83486432">
                                                         <label id="_lbl2Ditujukan10">AKT-KEU</label>
                                                     </td>
                                                     <td style="border-top: solid; border-width: thin;">
                                                         <label id="_lbl1Ditujukan9">III.2</label>
                                                         <input type="checkbox" id="_fieldlistDitujukan9" value="203BB8F7-5983-4C65-936F-9C3D83486433">
                                                         <label id="_lbl2Ditujukan9">SDM</label>
                                                     </td>
                                                     <td style="border-top: solid; border-right:solid; border-width: thin;">
                                                         <label id="_lbl1Ditujukan11">III.3</label>
                                                         <input type="checkbox" id="_fieldlistDitujukan11" value="203BB8F7-5983-4C65-936F-9C3D83486434">
                                                         <label id="_lbl2Ditujukan11">PU&TI</label>
                                                     </td>
                                                     <td style="border-top: solid; border-width: thin;">
                                                         <label id="_lbl1Ditujukan6">III.4</label>
                                                         <input type="checkbox" id="_fieldlistDitujukan6" value="203BB8F7-5983-4C65-936F-9C3D83486435">
                                                         <label id="_lbl2Ditujukan6">RSO</label>
                                                     </td>

                                                 </tr>
                                             </table>

                                         </td>
                                     </tr>
                                 </table>
                             </td>
                         </tr>
                         <tr>
                             <td></td>
                             <td>
                                 <table width="100%" style="border:solid; border-width: thin; text-align: center;">
                                     <tr>
                                         <td style="border-top: solid; border-right:solid; border-width: thin;">
                                             <input type="checkbox" id="_fieldlistDitujukan23" value="0D342E58-4715-44F5-A912-F3E98242FAA3">
                                             <label id="_lbl2Ditujukan23">KAWASAN</label>
                                         </td>
                                         <td style="border-top: solid; border-right:solid; border-width: thin;">
                                            <input type="checkbox" id="_fieldlistDitujukan25" value="203BB8F7-5983-4C65-936F-9C3D83486436">
                                            <label id="_lbl2Ditujukan25">ACS</label>
                                        </td>
                                        <td style="border-top: solid; border-right:solid; border-width: thin;">
                                            <input type="checkbox" id="_fieldlistDitujukan24" value="0D342E58-4715-44F5-A912-F3E98242FAA4">
                                            <label id="_lbl2Ditujukan24">OPT. AST</label>
                                        </td>
                                         <td style="border-top: solid; border-right:solid; border-width: thin;">
                                             <input type="checkbox" id="_fieldlistDitujukan20" value="E8B60A6F-C658-44A4-9486-DFEF5EADE092">
                                             <label id="_lbl2Ditujukan20">GM-WILAYAH I</label>
                                         </td>
                                         <td style="border-top: solid; border-right:solid; border-width: thin;">
                                             <input type="checkbox" id="_fieldlistDitujukan19" value="60A6881F-B09B-440D-8742-778D83A455C1">
                                             <label id="_lbl2Ditujukan19">GM-WILAYAH II & AGR</label>
                                         </td>
                                         <td style="border-top: solid; border-right:solid; border-width: thin;">
                                             <input type="checkbox" id="_fieldlistDitujukan21" value="E7F2EB45-A6FF-4FBD-9006-5FB34F7AFDC1">
                                             <label id="_lbl2Ditujukan21">GM-WILAYAH III & IHT</label>
                                         </td>
                                         <td style="border-top: solid; border-right:solid; border-width: thin;">
                                             <input type="checkbox" id="_fieldlistDitujukan22" value="C4F3C41D-AAE2-44BD-8C8A-A22DFD50BA66">
                                             <label id="_lbl2Ditujukan22">GM-WILAYAH IV</label>
                                         </td>
                                     </tr>

                                 </table>
                             </td>

                         </tr>
                         <tr>
                             <td><label>Disposisi</label></td>
                             <td>
                                 <table width="100%">
                                     <tr>
                                         <td width="50%">
                                             <ul class="fieldlistDisposisi">
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi1" name="_fieldlistDisposisi1"><label id="_lblDisposisi1" class="chxDisable">Setuju</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi1").Label("Setuju").HtmlAttributes(new { @class = "chxDisable" }))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi2" name="_fieldlistDisposisi2"><label id="_lblDisposisi2" class="chxDisable">Tolak</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi2").Label("Tolak"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi3" name="_fieldlistDisposisi3"><label id="_lblDisposisi3" class="chxDisable">Kaji & Saran</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi3").Label("Kaji & Saran"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi4" name="_fieldlistDisposisi4"><label id="_lblDisposisi4" class="chxDisable">Bicarakan Dengan Saya</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi4").Label("Bicarakan Dengan Saya"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi5" name="_fieldlistDisposisi5"><label id="_lblDisposisi5" class="chxDisable">Jawab</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi5").Label("Jawab"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi6" name="_fieldlistDisposisi6"><label id="_lblDisposisi6" class="chxDisable">Selesaikan</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi6").Label("Selesaikan"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi7" name="_fieldlistDisposisi7"><label id="_lblDisposisi7" class="chxDisable">Perbaiki</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi7").Label("Perbaiki"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi15" name="_fieldlistDisposisi15"><label id="_lblDisposisi15" class="chxDisable">Hadiri</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi7").Label("Perbaiki"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi16" name="_fieldlistDisposisi16"><label id="_lblDisposisi16" class="chxDisable">Tindak Lanjuti</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi16").Label("Tindak Lanjuti"))*@
                                                 </li>
                                                 <li>
                                                    <input type="checkbox" id="_fieldlistDisposisi17" name="_fieldlistDisposisi17"><label id="_lblDisposisi17" class="chxDisable">Dievaluasi</label>
                                                    @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi17").Label("Dievaluasi"))*@
                                                </li>
                                                <li>
                                                    <input type="checkbox" id="_fieldlistDisposisi18" name="_fieldlistDisposisi18"><label id="_lblDisposisi18" class="chxDisable">Dipedomani</label>
                                                    @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi18").Label("Dipedomani"))*@
                                                </li>
                                                <li>
                                                    <input type="checkbox" id="_fieldlistDisposisi19" name="_fieldlistDisposisi19"><label id="_lblDisposisi19" class="chxDisable">Dilaporkan</label>
                                                    @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi19").Label("Dilaporkan"))*@
                                                </li>
                                             </ul>
                                         </td>
                                         <td>
                                             <ul class="fieldlistDisposisi">
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi8" name="_fieldlistDisposisi8"><label id="_lblDisposisi8" class="chxDisable">Edarkan</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi8").Label("Edarkan"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi9" name="_fieldlistDisposisi9"><label id="_lblDisposisi9" class="chxDisable">Untuk Perhatian</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi9").Label("Untuk Perhatian"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi10" name="_fieldlistDisposisi10"><label id="_lblDisposisi10" class="chxDisable">Untuk Diketahui</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi10").Label("Untuk Diketahui"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi11" name="_fieldlistDisposisi11"><label id="_lblDisposisi11" class="chxDisable">Sesuai Penjelasan</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi11").Label("Sesuai Penjelasan"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi12" name="_fieldlistDisposisi12"><label id="_lblDisposisi12" class="chxDisable">Ingatkan</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi12").Label("Ingatkan"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi13" name="_fieldlistDisposisi13"><label id="_lblDisposisi13" class="chxDisable">Simpan</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi13").Label("Simpan"))*@
                                                 </li>
                                                 <li>
                                                     <input type="checkbox" id="_fieldlistDisposisi14" name="_fieldlistDisposisi14"><label id="_lblDisposisi14" class="chxDisable">Perbanyak</label>
                                                     @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi14").Label("Perbanyak"))*@
                                                 </li>
                                                 <li>
                                                    <input type="checkbox" id="_fieldlistDisposisi20" name="_fieldlistDisposisi20"><label id="_lblDisposisi20" class="chxDisable">Telaah</label>
                                                    @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi20").Label("Telaah"))*@
                                                </li>
                                                <li>
                                                    <input type="checkbox" id="_fieldlistDisposisi21" name="_fieldlistDisposisi21"><label id="_lblDisposisi21" class="chxDisable">Dimonitor</label>
                                                    @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi21").Label("Dimonitor"))*@
                                                </li>
                                                <li>
                                                    <input type="checkbox" id="_fieldlistDisposisi22" name="_fieldlistDisposisi22"><label id="_lblDisposisi22" class="chxDisable">Data/Informasi</label>
                                                    @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi22").Label("Data/Informasi"))*@
                                                </li>
                                                <li>
                                                    <input type="checkbox" id="_fieldlistDisposisi23" name="_fieldlistDisposisi23"><label id="_lblDisposisi23" class="chxDisable">Pertimbangan/Saran</label>
                                                    @*@(Html.Kendo().CheckBox().Name("fieldlistDisposisi23").Label("Pertimbangan/Saran"))*@
                                                </li>
                                             </ul>
                                         </td>
                                     </tr>
                                 </table>
                             </td>
                         </tr>
                         <tr>
                             <td><label>Penjelasan</label></td>
                             <td>
                                 <label id="_penjelasandispoisisisudin" style="width: 90%; height: 150px; border: 1px solid lightgray; "></label>
                                 @*@Html.TextArea("_penjelasandispoisisisudin", "", new { @class = "k-textbox", style = "width: 90%; height: 150px;" })*@
                             </td>
                         </tr>
                         <tr>
                             <td><label>Tanggal:</label></td>
                             <td>@Html.Kendo().DateTimePicker().Name("_tgldisposisisudin").HtmlAttributes(new { @readonly = "true" })</td>
                         </tr>
                     </table>
                </div>
                                                                                                        );
                }
)
                                    )
                                </td>
                            </tr>
                        </table>
                    </div>
                    <table>
                        <tr>
                            <td>Lampiran:</td>
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <label id="_Lampiran_MemoDinas" style="display: none;"></label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="demo-section k-content wide">
                                                <div class="wrapper">
                                                    <div id="daftarFile"></div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>

                    </table>
                </p>
                <p>
                    @Html.Kendo().Editor().Name("isiMemo").Tools(t => t.Clear()).HtmlAttributes(new { style = "height: 350px;  border-collapse: collapse;" })
                </p>
                <p>
                    <table>
                        <tr>
                            <td>
                                <label style="font-size:smaller;">Tembusan</label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                @Html.Kendo().TreeView().Name("_Tembusan").HtmlAttributes(new { style = "font-size: smaller;" })
                            </td>
                        </tr>
                    </table>
                </p>
            </td>
        </tr>
        @*<tr>
            <td>
                @Html.Kendo().QRCode().Name("QRMemoDinas").Value("Uji Coba").Size(120).ErrorCorrection(QRErrorCorrectionLevel.M)
            </td>
        </tr>*@

    </table>
    <table align="center">
        <tr>
            <td>
                <label style="font-size:medium; font-weight:600;">DISPOSISI</label>
            </td>
        </tr>
    </table>
    <table width="100%">
        <tr>
            <td><label>Ditujukan Kepada:</label></td>
            <td>
                <table width="100%" style="border:solid; border-width: thin; text-align: center;">
                    <tr>
                        <td style="border: solid; border-width: thin;" width="25%">
                            <input type="checkbox" id="fieldlistDitujukanA" value="C6DFDB6D-056E-45CC-9D07-A2207FF5FCC3">
                            <label>DIREKTUR</label>
                            <table width="100%" style="text-align: center;">
                                <tr>
                                    <td style="border-top: solid; border-width: thin;">
                                        <label>I.1</label>
                                        <input type="checkbox" id="fieldlistDitujukan1" value="203BB8F7-5983-4C65-936F-9C3D83486428">
                                        <label>CS</label>
                                    </td>
                                    <td style="border-top: solid; border-left: solid; border-right:solid; border-width: thin;">
                                        <label>I.2</label>
                                        <input type="checkbox" id="fieldlistDitujukan2" value="203BB8F7-5983-4C65-936F-9C3D83486429">
                                        <label>SPI</label>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td style="border: solid; border-width: thin;" width="25%">
                            <input type="checkbox" id="fieldlistDitujukanC" value="78DD72E8-18BA-4A78-85FE-578923128A95">
                            <label>OPS. I</label>
                            <table width="100%" style="text-align: center;">
                                <tr>
                                    <td style="border-top: solid; border-width: thin;">
                                        <label>II.1</label>
                                        <input type="checkbox" id="fieldlistDitujukan4" value="203BB8F7-5983-4C65-936F-9C3D83486430">
                                        <label>OPS TEH & ANTAN</label>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td style="border: solid; border-width: thin;" width="25%">
                            <input type="checkbox" id="fieldlistDitujukanB" value="BDD778FE-BE35-42D7-A891-4B2BE7126CC7">
                            <label>OPS. II</label>
                            <table width="100%" style="text-align: center;">
                                <tr>
                                    <td style="border-top: solid; border-width: thin;">
                                        <label>II.1</label>
                                        <input type="checkbox" id="fieldlistDitujukan5" value="203BB8F7-5983-4C65-936F-9C3D83486431">
                                        <label>OPS SAWIT & KARET</label>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td style="border: solid; border-width: thin;" width="25%">
                            <input type="checkbox" id="fieldlistDitujukanD" value="24BDBB95-0CD5-463E-9ABC-A4B03AB70A1A">
                            <label>BUSINESS SUPPORT</label>
                            <table width="100%" style="text-align: center;">
                                <tr>
                                    <td style="border-top: solid; border-width: thin;">
                                        <label>III.1</label>
                                        <input type="checkbox" id="fieldlistDitujukan9" value="203BB8F7-5983-4C65-936F-9C3D83486432">
                                        <label>AKT-KEU</label>
                                    </td>
                                    <td style="border-top: solid; border-left: solid; border-right:solid; border-width: thin;">
                                        <label>III.2</label>
                                        <input type="checkbox" id="fieldlistDitujukan10" value="203BB8F7-5983-4C65-936F-9C3D83486433">
                                        <label>SDM</label>
                                    </td>
                                    <td style="border-top: solid; border-right:solid; border-width: thin;">
                                        <label>III.3</label>
                                        <input type="checkbox" id="fieldlistDitujukan11" value="203BB8F7-5983-4C65-936F-9C3D83486434">
                                        <label>PU&TI</label>
                                    </td>
                                    <td style="border-top: solid; border-width: thin;">
                                        <label>III.4</label>
                                        <input type="checkbox" id="fieldlistDitujukan6" value="203BB8F7-5983-4C65-936F-9C3D83486435">
                                        <label>RSO</label>
                                    </td>
                                </tr>
                            </table>

                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <table width="100%" style="border:solid; border-width: thin; text-align: center;">
                    <tr>
                        <td style="border-top: solid; border-right:solid; border-width: thin;">
                            <input type="checkbox" id="fieldlistDitujukan25" value="203BB8F7-5983-4C65-936F-9C3D83486436">
                            <label>ACS</label>
                        </td>
                        <td style="border-top: solid; border-right:solid; border-width: thin;">
                            <input type="checkbox" id="fieldlistDitujukan24" value="0D342E58-4715-44F5-A912-F3E98242FAA4">
                            <label>OPT. AST</label>
                        </td>
                        <td style="border-top: solid; border-right:solid; border-width: thin;">
                            <input type="checkbox" id="fieldlistDitujukan23" value="0D342E58-4715-44F5-A912-F3E98242FAA3">
                            <label>KAWASAN</label>
                        </td>
                        <td style="border-top: solid; border-right:solid; border-width: thin;">
                            <input type="checkbox" id="fieldlistDitujukan20" value="E8B60A6F-C658-44A4-9486-DFEF5EADE092">
                            <label>GM-WILAYAH I</label>
                        </td>
                        <td style="border-top: solid; border-right:solid; border-width: thin;">
                            <input type="checkbox" id="fieldlistDitujukan19" value="60A6881F-B09B-440D-8742-778D83A455C1">
                            <label>GM-WILAYAH II & AGR </label>
                        </td>
                        <td style="border-top: solid; border-right:solid; border-width: thin;">
                            <input type="checkbox" id="fieldlistDitujukan21" value="E7F2EB45-A6FF-4FBD-9006-5FB34F7AFDC1">
                            <label>GM-WILAYAH III & IHT</label>
                        </td>
                        <td style="border-top: solid; border-right:solid; border-width: thin;">
                            <input type="checkbox" id="fieldlistDitujukan22" value="C4F3C41D-AAE2-44BD-8C8A-A22DFD50BA66">
                            <label>GM-WILAYAH IV</label>
                        </td>
                    </tr>
                </table>
            </td>

        </tr>
        <tr>
            <td><label>Disposisi</label></td>
            <td>
                <table width="100%">
                    <tr>
                        <td width="50%">
                            <ul class="fieldlistDisposisi">
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi1").Label("Setuju"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi2").Label("Tolak"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi3").Label("Kaji & Saran"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi4").Label("Bicarakan Dengan Saya"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi5").Label("Jawab"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi6").Label("Selesaikan"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi7").Label("Perbaiki"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi15").Label("Hadiri"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi16").Label("Tindak Lanjut"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi17").Label("Dievaluasi"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi18").Label("Dipedomani"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi19").Label("Dilaporkan"))
                                </li>
                            </ul>

                        </td>
                        <td>
                            <ul class="fieldlistDisposisi">
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi8").Label("Edarkan"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi9").Label("Untuk Perhatian"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi10").Label("Untuk Diketahui"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi11").Label("Sesuai Penjelasan"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi12").Label("Ingatkan"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi13").Label("Simpan"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi14").Label("Perbanyak"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi20").Label("Telaah"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi21").Label("Dimonitor"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi22").Label("Data/Informasi"))
                                </li>
                                <li>
                                    @(Html.Kendo().CheckBox().Name("fieldlistDisposisi23").Label("Pertimbangan/Saran"))
                                </li>
                            </ul>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td><label>Penjelasan</label></td>
            <td>
                @Html.TextArea("penjelasan", "", new { @class = "k-textbox", style = "width: 90%; height: 150px;" })
            </td>
        </tr>
        <tr>
            <td><label>Tanggal:</label></td>
            <td>@Html.Kendo().DateTimePicker().Name("tgldisposisi").Value(DateTime.Now).Format("dd/MM/yyyy")</td>
        </tr>
    </table>

    <p></p>
    <table width="100%">
        <tr>
            <td align="center">
                <button id="Ok" class="k-button">Ok</button>
            </td>
        </tr>
    </table>

</div>

<style>
    ul {
        list-style-type: none;
    }

    .fieldlistDitujukan {
        padding-left: 0;
    }

    .fieldlistDisposisi {
        padding-left: 0;
    }

    table.k-editor {
        border-collapse: collapse;
    }

    .daftarfile {
        float: left;
        position: relative;
        margin: 0 10px 10px 0;
        padding: 0;
        font-size: larger;
        font-weight: 600;
        width: 100%;
    }

        .daftarfile img {
            width: 30px;
            height: 30px;
        }

    .wrapper:after {
        content: ".";
        display: block;
        height: 0;
        clear: both;
        visibility: hidden;
    }

    .sembunyikan {
        color: red;
        background-color: aquamarine;
    }

    .imgSuratMasuk {
        width: 490px;
    }

        .imgSuratMasuk:hover {
            transform: scale(1.5);
        }

    .chxDisable {
        display: inline;
        margin-left: 5px;
    }

    .unChk {
        color: lightgray;
    }

    .fieldlistDitujukan {
        padding-left: 0;
    }

    .fieldlistDisposisi {
        padding-left: 0;
    }
</style>
<script>
    var terima_MemoDinasId, err;
    var detailBaru = false;
    var userName;
    var menuId = 'C0990AC1-2DB8-470B-AFE9-80DB4C433275';
    var dataROW;

    $(document).ajaxStart(function () {
        $("#_header").addClass('disabledbutton');
        $("#_detail").addClass('disabledbutton');
        $("#_footer").addClass('disabledbutton');
        $("#progress").show();
    }).ajaxStop(function () {
        $("#progress").hide();
        $("#_header").removeClass('disabledbutton');
        $("#_detail").removeClass('disabledbutton');
        $("#_footer").removeClass('disabledbutton');
    });

    $(function () {
        hubMemoDinas = $.connection.memoDinasHub;
        $.connection.hub.start().done(function () {
            // sudah terhubung ke hub

        });

        hubMemoDinas.client.disposisiMemoDinas = function (data) {
            var grd = $("#grdDetail").data('kendoGrid');
            grd.dataSource.read();
        };
    });

    $(document).ready(function () {
        err = $("#errWindow").kendoWindow({
            title: "Error Data",
            modal: true,
            visible: false,
            resizable: false,
            width: 300
        }).data("kendoWindow");

        wndDisposisiMemo = $("#wDisposisiMemo").kendoWindow({
            title: "Disposisi Memo",
            modal: true,
            visible: false,
            resizable: true
            //width: 800//,
            //height: 600
        }).data("kendoWindow");

        wndIsiMemo = $("#wIsiMemo").kendoWindow({
            title: "Disposisi Memo",
            modal: true,
            visible: false,
            resizable: true
            //width: 800//,
            //height: 600
        }).data("kendoWindow");

        wndDistribusiMemo = $("#wDistribusiMemo").kendoWindow({
            title: "Distribusi Memo",
            modal: true,
            visible: false,
            resizable: false,
            width: 300,
            height: 50
        }).data("kendoWindow");

    });

    $(window).on("beforeunload", function () {
        return "Please don't leave me!";
    });

    $(window).on("unload", function () {
        hapusPenggunaPortalYangAktif();
    });



    function hapusPenggunaPortalYangAktif() {
        var url = '/Account/HapusPenggunaPortalYangAktif';
        return $.ajax({
            url: url,
            data: {
                _menuId: menuId
            },
            type: 'POST',
            datatype: 'json'
        });
    }

    function grdOnChange(e) {
    }

    function grdOnEdit(e) {
        var model = e.model;
        uid = model.uid;
        this.expandRow(this.tbody.find("tr[data-uid='" + uid + "']"));
        if (model.isNew()) {
            model.id = model.uid;
            e.container.find("input[name=terima_MemoDinasId]").val(model.id).change();
        }
        terima_MemoDinasId = model.id;

        getUserName().done(function (data) {
            if (data) {
                userName = data;
            }
            else {
            }
        }).fail(function (x) {
            alert('Error! Hubungi Bagian TI');
        });
    }

    function getUserName() {
        var url = '/Input/GetUserName';
        return $.ajax({
            url: url,
            data: {},
            type: 'GET',
            datatype: 'json'
        })
    }

    function grdOnDataBound(e) {
        $("#grdDetail").find(".k-icon.k-i-collapse").trigger("click");
    }

    function filterGridUpdate(e) {
        var mdl = e.models;
        var arr = [];
        return {
            _model: arr,
            _menuId: menuId
        };
    }

    function filterGridDestroy(e) {
        return {
            _model: JSON.stringify(e),
            _menuId: menuId
        };
    }

    function sendData() {
        var grid = $("#grdDetail").data("kendoGrid"),
            parameterMap = grid.dataSource.transport.parameterMap;

        //get the new and the updated records
        var currentData = grid.dataSource.data();
        var updatedRecords = [];
        var newRecords = [];

        for (var i = 0; i < currentData.length; i++) {
            if (currentData[i].isNew()) {
                //this record is new
                newRecords.push(JSON.stringify(currentData[i]));
            } else if (currentData[i].dirty) {
                updatedRecords.push(JSON.stringify(currentData[i]));
            }
        }

        //this records are deleted
        var deletedRecords = [];
        for (var i = 0; i < grid.dataSource._destroyed.length; i++) {
            deletedRecords.push(JSON.stringify(grid.dataSource._destroyed[i]));
        }

        var data = {};
        $.extend(data, parameterMap({ updated: updatedRecords }), parameterMap({ deleted: deletedRecords }), parameterMap({ new: newRecords }), parameterMap({ mnid: menuId }));
        _sendData(data).done(function (msg) {
            if (msg == "Success") {
                $('#btnSelesaiSimpanDetail').click();
                grid.dataSource.read([]);
                gridStatus = 'belum-ngapa-ngapain';
            }
            else {
                $('#errMsg').text(msg);
                gridStatus = 'sudah-nyoba-disimpan-tapi-model-masih-salah';
                openErrWindow();
            }
        }).fail(function (x) {
            $('#errMsg').text(msg);
            openErrWindow();
            grid.dataSource.read([]);
            gridStatus = 'sudah-nyoba-disimpan-tapi-gagal';
        });
    }

    function openErrWindow(e) {
        err.open().center();
        $("#ok").click(function () {
            err.close();
        });
    }

    function _sendData(data) {
        return $.ajax({
            url: "/Input/UpdateCreateDelete",
            data: data,
            type: "POST"
        })
    }
    function filterdetailRead(e) {
        var arrFilter = [];
        var nBulan = $('#ddlBulan').data('kendoDropDownList').selectedIndex + 1;
        var nTahun = $('#TahunBuku').val();

        arrFilter.push('year(TanggalTerima_MemoDinas)');
        arrFilter.push(nTahun);

        arrFilter.push('month(TanggalTerima_MemoDinas)');
        arrFilter.push(nBulan);

        //if ($('#filterPengirim').val() != '')
        //{
        //    arrFilter.push('upper(pengirim)');
        //    arrFilter.push($('#filterPengirim').val().toUpperCase());
        //}

        //if ($('#filterPerihal').val() != '') {
        //    arrFilter.push('upper(perihal)');
        //    arrFilter.push($('#filterPerihal').val().toUpperCase());
        //}

        return {
            _menuId: menuId,
            _filter: arrFilter
        };
    }

    function filterdetailCreate(e) {
        return { _menuId: menuId };
    }

    function openWindowDisposisiMemo(e) {
        e.preventDefault();

        var grid = this;
        var row = $(e.currentTarget).closest("tr");
        var __data = grid.dataItem(row);

        dataROW = __data;

        //var grid = $("#grdDetail").data("kendoGrid");
        //var __data = grid.dataItem(grid._current.closest("tr"))

        $('#_TanggalNoPenerimaan').text(__data.TanggalTerima_MemoDinas.getDate().toString() + '/' + __data.TanggalTerima_MemoDinas.getMonth().toString() + '/' +
            __data.TanggalTerima_MemoDinas.getFullYear().toString() + ' [' + __data.NomorTerima_MemoDinas.toString() + ']');
        $('#_SifatSurat').text(__data.SifatSurat_MemoDinas.toString());

        var arrDitujukan = [];
        var arrarrDisposisi = [];
        for (var i = 24; i > 0; i--) {
            if (typeof ($("#fieldlistDitujukan" + i.toString()).val()) != "undefined") {
                $("#fieldlistDitujukan" + i.toString()).prop('checked', false);
            }
        }
        arrDitujukan = __data.TujuanDisposisi_MemoDinas.split(",");
        for (var i = 24; i > 0; i--) {
            if (typeof ($("#fieldlistDitujukan" + i.toString()).val()) != "undefined") {
                if (jQuery.inArray($($("#fieldlistDitujukan" + i.toString()).prop('labels')).text(), arrDitujukan) > -1) {
                    $("#fieldlistDitujukan" + i.toString()).prop('checked', true);
                }
                else {
                }
            }
        }

        for (var i = 1; i < 23; i++) {
            $("#fieldlistDisposisi" + i.toString()).prop('checked', false)
        }
        arrDisposisi = __data.IsiDisposisi_MemoDinas.split(",");
        for (var i = 1; i < 23; i++) {
            if (jQuery.inArray($($("#fieldlistDisposisi" + i.toString()).prop('labels')).text(), arrDisposisi) > -1) {
                $("#fieldlistDisposisi" + i.toString()).prop('checked', true)
            }
            else {
            }
        }
        $("#penjelasan").val(__data.PenjelasanDisposisi_MemoDinas);

        wndDisposisiMemo.open().center();

    }

    function simpanDisposisiMemo(id, tujuan, isidisposisi, penjelasan, tgldisposisi, username, unitid) {
        var url = '/Input/ExecSQL';
        return $.ajax({
            url: url,
            data: {
                scriptSQL: "exec [SPDK_KanpusEF]..[UbahNotifJadiTerbaca] '" + username + "','" + menuId + "','" + id + "'; exec [dbo].[UbahStatusMemoDariTerimaJadiBaca] '" + id + "', '" + tujuan + "', '" + isidisposisi + "', '" + penjelasan + "', '" + tgldisposisi + "', '" + username + "', '" + unitid + "'",
                _menuId: menuId
            },
            type: 'POST',
            datatype: 'json'
        });

    }


    function openWindowDistribusiMemo(e) {
        e.preventDefault();
        wndDistribusiMemo.open().center();
    }

    function distribusiMemo(id) {
        var url = '/Input/ExecSQL';
        return $.ajax({
            url: url,
            data: {
                scriptSQL: "exec [dbo].[UbahStatusMemoDariBacaJadiDistribusi] '" + id + "'",
                _menuId: menuId
            },
            type: 'POST',
            datatype: 'json'
        });

    }

    function openWindowIsiMemo(e) {
        e.preventDefault();
        var grid = this;
        var row = $(e.currentTarget).closest("tr");
        var data = grid.dataItem(row);
        var __data = data;
        var Isi = data.Isi_MemoDinasFinal;
        dataROW = data;
        wndIsiMemo.open().center();


        $('#_TanggalNoPenerimaan').text(__data.TanggalTerima_MemoDinas.getDate().toString() + '/' + __data.TanggalTerima_MemoDinas.getMonth().toString() + '/' +
            __data.TanggalTerima_MemoDinas.getFullYear().toString() + ' [' + __data.NomorTerima_MemoDinas.toString() + ']');
        $('#_SifatSurat').text(__data.SifatSurat_MemoDinas.toString());


        stringDecode(data.Isi_MemoDinasFinal).done(function (data) {
            $('#isiMemo').data('kendoEditor').value(data);
            $('#isiMemo').data('kendoEditor').body.setAttribute('contenteditable', false);
        });

        $('#_NoMemo').text(data.Nomor_MemoDinasView);
        $('#_Kepada').text(data.NamaTujuan_MemoDinas);
        $('#_Dari').text(data.NamaPengirim);
        $('#_Perihal').text(data.Perihal_MemoDinas.toString().toUpperCase());
        $('#_Tanggal').text(data.Tanggal_MemoDinas.getDate().toString() + '/' + data.Tanggal_MemoDinas.getMonth().toString() + '/' + data.Tanggal_MemoDinas.getFullYear().toString());
        $('#_Lampiran_MemoDinas').text(data.Lampiran_MemoDinas)

        var listLampiranMemoDinas = data.Lampiran_MemoDinas;
        if (listLampiranMemoDinas == null || listLampiranMemoDinas == '') {
            listLampiranMemoDinas = [];
        }
        else {
            listLampiranMemoDinas = listLampiranMemoDinas.split(',');
        }
        $("#daftarFile").html("")

        var pengirimId;
        for (var i = 0; i < listLampiranMemoDinas.length; i++) {
            pengirimId = listLampiranMemoDinas[i].substr(0, data.UnitId.toString().length);
            listLampiranMemoDinas[i] = listLampiranMemoDinas[i].substr(data.UnitId.toString().length + 1, 100);
            renderNamaFile(listLampiranMemoDinas[i], pengirimId);
        }


        var treeV = $('#_Tembusan').data('kendoTreeView');
        treeV.dataSource.data([])
        var arrTembusan = data.CCNamaTujuan_MemoDinas.split(',');
        for (var i = 0; i < arrTembusan.length; i++) {
            treeV.append({ id: i, text: '- ' + arrTembusan[i] });
        }

        var tgl = data.Tanggal_MemoDinas;
        //$('#QRMemoDinas').data('kendoQRCode').value("No Memo: " + data.Nomor_MemoDinasView + "; Kepada: " + data.NamaTujuan_MemoDinas + "; Dari: " + data.NamaUnit + ";" + "Perihal: " + data.Perihal_MemoDinas.toString().toUpperCase() + "; Tanggal: " +
        //    tgl.getDate().toString() + '/' + tgl.getMonth().toString() + '/' + tgl.getFullYear().toString());

        if (data.StatusDistribusi == true) {
            $('#_TahunAgenda_SuratMasuk').text(data.TahunAgenda_SuratMasuk);
            $('#_NomorAgenda_SuratMasuk').text(data.NomorAgenda_SuratMasuk);
            readSuratMasuk();
            $('#yaMemoDistribusi').show();
        }
        else {
            $('#_TahunAgenda_SuratMasuk').text('');
            $('#_NomorAgenda_SuratMasuk').text('');
            $('#yaMemoDistribusi').hide();
        }

        var _X = dataROW.TujuanDisposisi_MemoDinas.split(',');


        // DIRUT
        if (_X.join().toUpperCase().search('C6DFDB6D-056E-45CC-9D07-A2207FF5FCC3') > -1)
            $("#fieldlistDitujukanA").prop('checked', true);
        else
            $("#fieldlistDitujukanA").prop('checked', false);

        // DIROP
        if (_X.join().toUpperCase().search('BDD778FE-BE35-42D7-A891-4B2BE7126CC7') > -1)
            $("#fieldlistDitujukanB").prop('checked', true);
        else
            $("#fieldlistDitujukanB").prop('checked', false);

        // DIRMA
        if (_X.join().toUpperCase().search('78DD72E8-18BA-4A78-85FE-578923128A95') > -1)
            $("#fieldlistDitujukanC").prop('checked', true);
        else
            $("#fieldlistDitujukanC").prop('checked', false);

        // DIRKOM
        if (_X.join().toUpperCase().search('24BDBB95-0CD5-463E-9ABC-A4B03AB70A1A') > -1)
            $("#fieldlistDitujukanD").prop('checked', true);
        else
            $("#fieldlistDitujukanD").prop('checked', false);

        $("#fieldlistDitujukanA").prop("disabled", true);
        $("#fieldlistDitujukanB").prop('disabled', true);
        $("#fieldlistDitujukanC").prop('disabled', true);
        $("#fieldlistDitujukanD").prop('disabled', true);



        var tujuanDisposisi = dataROW.TujuanDisposisi_MemoDinas;
        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486428") > -1)
            $("#fieldlistDitujukan1").prop('checked', true);
        else
            $("#fieldlistDitujukan1").prop('checked', false);
        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486429") > -1)
            $("#fieldlistDitujukan2").prop('checked', true);
        else
            $("#fieldlistDitujukan2").prop('checked', false);
        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486430") > -1)
            $("#fieldlistDitujukan4").prop('checked', true);
        else
            $("#fieldlistDitujukan4").prop('checked', false);
        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486431") > -1)
            $("#fieldlistDitujukan5").prop('checked', true);
        else
            $("#fieldlistDitujukan5").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486435") > -1)
            $("#fieldlistDitujukan6").prop('checked', true);
        else
            $("#fieldlistDitujukan6").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486432") > -1)
            $("#fieldlistDitujukan9").prop('checked', true);
        else
            $("#fieldlistDitujukan9").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486433") > -1)
            $("#fieldlistDitujukan10").prop('checked', true);
        else
            $("#fieldlistDitujukan10").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486434") > -1)
            $("#fieldlistDitujukan11").prop('checked', true);
        else
            $("#fieldlistDitujukan11").prop('checked', false);
        if (tujuanDisposisi.toUpperCase().search("60A6881F-B09B-440D-8742-778D83A455C1") > -1)
            $("#fieldlistDitujukan19").prop('checked', true);
        else
            $("#fieldlistDitujukan19").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("E8B60A6F-C658-44A4-9486-DFEF5EADE092") > -1)
            $("#fieldlistDitujukan20").prop('checked', true);
        else
            $("#fieldlistDitujukan20").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("E7F2EB45-A6FF-4FBD-9006-5FB34F7AFDC1") > -1)
            $("#fieldlistDitujukan21").prop('checked', true);
        else
            $("#fieldlistDitujukan21").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("C4F3C41D-AAE2-44BD-8C8A-A22DFD50BA66") > -1)
            $("#fieldlistDitujukan22").prop('checked', true);
        else
            $("#fieldlistDitujukan22").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("0D342E58-4715-44F5-A912-F3E98242FAA3") > -1)
            $("#fieldlistDitujukan23").prop('checked', true);
        else
            $("#fieldlistDitujukan23").prop('checked', false);
        if (tujuanDisposisi.toUpperCase().search("0D342E58-4715-44F5-A912-F3E98242FAA4") > -1)
            $("#fieldlistDitujukan24").prop('checked', true);
        else
            $("#fieldlistDitujukan24").prop('checked', false);

        if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486436") > -1)
            $("#fieldlistDitujukan25").prop('checked', true);
        else
            $("#fieldlistDitujukan25").prop('checked', false);


        for (var i = 1; i <= 25; i++) {
            $("#fieldlistDitujukan" + i.toString()).prop('disabled', true);
        }

        for (var i = 1; i <= 25; i++) {
            $("#fieldlistDisposisi" + i.toString()).prop('checked', false);
            $("#fieldlistDisposisi" + i.toString()).prop('disabled', true);
        }
        arrDisposisi = dataROW.IsiDisposisi_MemoDinas.split(",");
        for (var i = 1; i <= 25; i++) {
            if (jQuery.inArray($($("#fieldlistDisposisi" + i.toString()).prop('labels')).text(), arrDisposisi) > -1) {
                $("#fieldlistDisposisi" + i.toString()).prop('checked', true)
            }
            else {
            }
        }
        $("#penjelasan").val(dataROW.PenjelasanDisposisi_MemoDinas);
        $('#tgldisposisi').data('kendoDateTimePicker').value(dataROW.TanggalDisposisi_MemoDinas);

        $("#Ok").click(function () {
            wndIsiMemo.close();
        });
    }

    function renderNamaFile(nmFile, pengirimId) {
        var extension = "";
        var namaFile = pengirimId + "_" + nmFile;
        var i = nmFile.lastIndexOf('.');
        if (i > 0)
            extension = nmFile.substring(i + 1).toLowerCase().substring(0, 3);
        else
            extension = "";
        $("<p><div class='daftarfile'><table><tr><td><img src='/Content/Images/FileTypeIcon/png/" + extension + ".png'/></td></tr><tr><td>[" + namaFile + "]</td></tr><tr><td><button type='button' onClick='btnViewOnClick(\"" + nmFile + "\")'><span class='k-font-icon k-i-pencil'></span>Lihat</button></td></tr></table></div></p>").appendTo($("#daftarFile"));
    }

    function btnViewOnClick(nmFile) {
        var grid = $("#grdDetail").data("kendoGrid");
        var __data;
        if (typeof (grid._current) == "undefined")
            __data = dataROW;
        else
            __data = grid.dataItem(grid._current.closest("tr"));

        //var file = __data.PengirimId + '_' + nmFile;
        var file = __data.Lampiran_MemoDinas;
        var newwindow = window.open("/LampiranMemo/" + nmFile, "window2", "");
    }

    function stringDecode(strDecode) {
        var url = '/Input/StringDecode';
        return $.ajax({
            url: url,
            data: {
                str: strDecode
            },
            type: 'POST',
            datatype: 'json'
        });
    }

    function btnDisposisiOnClick(e) {
        e.preventDefault();
        var grid = $("#grdDetail").data("kendoGrid");
        var __data = dataROW;//grid.dataItem(grid._current.closest("tr"))
        var arrDitujukan = [];
        for (var i = 24; i > 0; i--) {
            if (typeof ($("#fieldlistDitujukan" + i.toString()).val()) != "undefined") {
                if ($("#fieldlistDitujukan" + i.toString()).prop('checked') == true) {
                    arrDitujukan.push($($("#fieldlistDitujukan" + i.toString()).prop('labels')).text());
                }
                else {
                }
            }
        }
        var arrDisposisi = [];
        for (var i = 1; i < 23; i++) {
            if ($("#fieldlistDisposisi" + i.toString()).prop('checked') == true) {
                arrDisposisi.push($($("#fieldlistDisposisi" + i.toString()).prop('labels')).text());
            }
            else {
            }
        }

        simpanDisposisiMemo(__data.Terima_MemoDinasId, arrDitujukan.toString(), arrDisposisi.toString(), $("#penjelasan").val(),
            $("#tgldisposisi").val(), $("#namaUser").val(), __data.UnitId).done(function (_data) {
                if (_data == 'false') {
                    alert("Gagal!");
                }
                else {
                    __data.TujuanDisposisi_MemoDinas = arrDitujukan.toString();
                    __data.IsiDisposisi_MemoDinas = arrDisposisi.toString();
                    __data.PenjelasanDisposisi_MemoDinas = $("#penjelasan").val();
                    __data.TanggalDisposisi_MemoDinas = $("#tgldisposisi").val();
                }
                grid.dataSource.read();
                wndDisposisiMemo.close();
            });
    }

    function btnBatalDisposisiOnClick(e) {
        e.preventDefault();
        wndDisposisiMemo.close();
    }


    function btnDistribusiOnClick(e) {
        var grid = $("#grdDetail").data("kendoGrid");
        var __data = dataROW; //grid.dataItem(grid._current.closest("tr"))
        distribusiMemo(__data.Terima_MemoDinasId).done(function (dta) {
            if (dta == 'true') {
                hubMemoDinas.server.terimaMemoDinas('7B8B79FA-04E7-40A3-A7B5-D1DE6BCA2B83');
                wndDistribusiMemo.close();
                grid.dataSource.read();
            }
            else {
            }
        });
    }

    function btnBatalDistribusiOnClick(e) {
        wndDistribusiMemo.close();
    }

    function readSuratMasuk() {
        ambilSuratMasuk($('#_TahunAgenda_SuratMasuk').text(), $('#_NomorAgenda_SuratMasuk').text()).done(function (dta) {
            if (dta.length > 0) {
                $('#_Nomor_SuratMasuk').text(dta[0][5]);
                $('#_Pengirim_SuratMasuk').text(dta[0][7]);
                $('#_Perihal_SuratMasuk').text(dta[0][9]);
                $('#_Tanggal_SuratMasuk').text(dta[0][4]);
                $('#img1').removeAttr('src');
                $('#img2').removeAttr('src');
                $('#img3').removeAttr('src');
                $('#img4').removeAttr('src');
                $('#img5').removeAttr('src');
                $('#imgdisposisi').removeAttr('src');
                d = new Date();
                if (dta[0][10] == "System.Byte[]") $('#img1').attr('src', '/Content/Images/View/' + $('#namaUser').val() + '_img1.jpg?' + d.getTime());
                if (dta[0][21] == "System.Byte[]") $('#img2').attr('src', '/Content/Images/View/' + $('#namaUser').val() + '_img2.jpg?' + d.getTime());
                if (dta[0][22] == "System.Byte[]") $('#img3').attr('src', '/Content/Images/View/' + $('#namaUser').val() + '_img3.jpg?' + d.getTime());
                if (dta[0][23] == "System.Byte[]") $('#img4').attr('src', '/Content/Images/View/' + $('#namaUser').val() + '_img4.jpg?' + d.getTime());
                if (dta[0][24] == "System.Byte[]") $('#img5').attr('src', '/Content/Images/View/' + $('#namaUser').val() + '_img5.jpg?' + d.getTime());

                if (dta[0][11] == "System.Byte[]") $('#imgdisposisi').attr('src', '/Content/Images/View/' + $('#namaUser').val() + '_imgdisposisi.jpg?' + d.getTime());

                if (true) {

                    var _X = dta[0][17].split(',');
                    var _Y = dta[0][14].split(',');
                    //_X.push(_Y[0]);

                    $('#__SifatSurat').data('kendoDropDownList').value(dta[0][16]);

                    // DIRUT
                    if (_X.join().toUpperCase().search('C6DFDB6D-056E-45CC-9D07-A2207FF5FCC3') > -1) {
                        $("#_fieldlistDitujukanA").prop('checked', true).prop("disabled", true);
                    }
                    // DIROP
                    if (_X.join().toUpperCase().search('BDD778FE-BE35-42D7-A891-4B2BE7126CC7') > -1) {
                        $("#_fieldlistDitujukanB").prop('checked', true).prop("disabled", true);
                    }
                    // DIRMA
                    if (_X.join().toUpperCase().search('78DD72E8-18BA-4A78-85FE-578923128A95') > -1) {
                        $("#_fieldlistDitujukanC").prop('checked', true).prop("disabled", true);
                    }
                    // DIRKOM
                    if (_X.join().toUpperCase().search('24BDBB95-0CD5-463E-9ABC-A4B03AB70A1A') > -1) {
                        $("#_fieldlistDitujukanD").prop('checked', true).prop("disabled", true);
                    }

                    $("#_fieldlistDitujukanA").prop("disabled", true);
                    $("#_fieldlistDitujukanB").prop('disabled', true);
                    $("#_fieldlistDitujukanC").prop('disabled', true);
                    $("#_fieldlistDitujukanD").prop('disabled', true);


                    var arrDitujukan = [];
                    for (var i = 24; i > 0; i--) {
                        if (typeof ($("#_fieldlistDitujukan" + i.toString()).val()) != "undefined") {
                            $("#_fieldlistDitujukan" + i.toString()).prop("disabled", true);
                        }
                    }

                    var tujuanDisposisi = dta[0][17];
                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486428") > -1) {
                        $("#_fieldlistDitujukan1").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan1').addClass('unChk');
                        $('#_lbl2Ditujukan1').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486429") > -1) {
                        $("#_fieldlistDitujukan2").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan2').addClass('unChk');
                        $('#_lbl2Ditujukan2').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486430") > -1) {
                        $("#_fieldlistDitujukan4").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan4').addClass('unChk');
                        $('#_lbl2Ditujukan4').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486431") > -1) {
                        $("#_fieldlistDitujukan5").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan5').addClass('unChk');
                        $('#_lbl2Ditujukan5').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486435") > -1) {
                        $("#_fieldlistDitujukan6").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan6').addClass('unChk');
                        $('#_lbl2Ditujukan6').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486432") > -1) {
                        $("#_fieldlistDitujukan9").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan9').addClass('unChk');
                        $('#_lbl2Ditujukan9').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486433") > -1) {
                        $("#_fieldlistDitujukan10").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan10').addClass('unChk');
                        $('#_lbl2Ditujukan10').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486434") > -1) {
                        $("#_fieldlistDitujukan11").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan11').addClass('unChk');
                        $('#_lbl2Ditujukan11').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("60A6881F-B09B-440D-8742-778D83A455C1") > -1) {
                        $("#_fieldlistDitujukan19").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan19').addClass('unChk');
                        $('#_lbl2Ditujukan19').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("E8B60A6F-C658-44A4-9486-DFEF5EADE092") > -1) {
                        $("#_fieldlistDitujukan20").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan20').addClass('unChk');
                        $('#_lbl2Ditujukan20').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("E7F2EB45-A6FF-4FBD-9006-5FB34F7AFDC1") > -1) {
                        $("#_fieldlistDitujukan21").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan21').addClass('unChk');
                        $('#_lbl2Ditujukan21').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("C4F3C41D-AAE2-44BD-8C8A-A22DFD50BA66") > -1) {
                        $("#_fieldlistDitujukan22").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan22').addClass('unChk');
                        $('#_lbl2Ditujukan22').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("0D342E58-4715-44F5-A912-F3E98242FAA3") > -1) {
                        $("#_fieldlistDitujukan23").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan23').addClass('unChk');
                        $('#_lbl2Ditujukan23').addClass('unChk');
                    }
                    if (tujuanDisposisi.toUpperCase().search("0D342E58-4715-44F5-A912-F3E98242FAA4") > -1) {
                        $("#_fieldlistDitujukan24").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan24').addClass('unChk');
                        $('#_lbl2Ditujukan24').addClass('unChk');
                    }

                    if (tujuanDisposisi.toUpperCase().search("203BB8F7-5983-4C65-936F-9C3D83486436") > -1) {
                        $("#_fieldlistDitujukan25").prop('checked', true).prop("disabled", true);
                    }
                    else {
                        $('#_lbl1Ditujukan25').addClass('unChk');
                        $('#_lbl2Ditujukan25').addClass('unChk');
                    }

                    for (var i = 1; i <= 25; i++) {
                        $("#_fieldlistDisposisi" + i.toString()).prop('checked', false).prop("disabled", true);
                    }
                    arrDisposisi = dta[0][18].split(",");
                    for (var i = 1; i <= 25; i++) {
                        if (jQuery.inArray($('#_lblDisposisi' + i.toString()).text(), arrDisposisi) > -1) {
                            $("#_fieldlistDisposisi" + i.toString()).prop('checked', true).prop("disabled", true);
                        }
                        else {
                            $('#_lblDisposisi' + i.toString()).addClass("unChk");
                        }
                    }
                    $("#_penjelasandispoisisisudin").text(dta[0][19]).prop("disabled", true);
                    $('#_tgldisposisisudin').data('kendoDateTimePicker').value(dta[0][20]);
                }
            }
        });
    }

    function ambilSuratMasuk(thn, nmr) {
        var url = '/Input/ExecSQL';
        return $.ajax({
            url: url,
            data: {
                scriptSQL: "SET DATEFORMAT DMY; SELECT TOP 1 [thn_agenda],[no_agenda],[tgl_terima],[penerima],[tgl_surat],[no_surat],[kel_pengirim],[pengirim],[kel_perihal],[perihal],[img1],[imgdisposisi], " +
                    " B.SuratDinasMasukId, B.StatusSuratDinas, B.TujuanId_SuratDinasMasuk,B.CCTujuanId_SuratDinasMasuk, C.Sifat_SuratDinasMasuk, C.TujuanDisposisi_SuratDinasMasuk, C.IsiDisposisi_SuratDinasMasuk, " +
                    " C.PenjelasanDisposisi_SuratDinasMasuk, C.TanggalDidisposisiOlehDireksi, img2,img3,img4,img5 FROM [Sekper].[dbo].[agenda_surat_masuk] A " +
                    " JOIN [SPDK_KanpusEF].[dbo].[eOffice_SuratDinasMasuk] B ON B.TahunAgenda=A.thn_agenda AND B.NoAgenda=A.no_agenda " +
                    " JOIN [SPDK_KanpusEF].[dbo].[eOffice_DisposisiSuratDinasMasuk] C ON C.SuratDinasMasukId=B.SuratDinasMasukId AND C.DireksiId=B.TujuanId_SuratDinasMasuk" +
                    " WHERE thn_agenda=" + thn + " and no_agenda=" + nmr + " AND (SELECT count(*) FROM [SPDK_KanpusEF].[dbo].[eOffice_SuratDinasMasuk] WHERE TahunAgenda = " + thn + " and NoAgenda = " + nmr + ")>= 1",
                _menuId: menuId
            },
            type: 'POST',
            datatype: 'json'
        });
    }

    function btnProsesOnClick(e) {
        var grid = $('#grdDetail').data('kendoGrid');
        grid.dataSource.read();
    }

    function ubahStatusNotif(nmuser, id) {
        var url = '/Input/ExecSQL';
        return $.ajax({
            url: url,
            data: {
                scriptSQL: "exec [SPDK_KanpusEF]..[UbahNotifJadiTerbaca] '" + nmuser + "','" + menuId + "','" + id + "'",
                //"update [SPDK_KanpusEF].[dbo].[eOffice_NotifikasiSudinModin] set StatusNotifikasi='TERBACA' where NamaUser='" + nmuser + "' and MenuId='" + menuId + "'",
                _menuId: menuId
            },
            type: 'POST',
            datatype: 'json'
        });

    }

</script>
